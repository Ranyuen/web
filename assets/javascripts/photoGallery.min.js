!function(e,t,n){function r(n,r,i){var o=t.createElement(n);return r&&(o.id=Z+r),i&&(o.style.cssText=i),e(o)}function i(){return n.innerHeight?n.innerHeight:e(n).height()}function o(t,n){n!==Object(n)&&(n={}),this.cache={},this.el=t,this.value=function(t){var r;return void 0===this.cache[t]&&(r=e(this.el).attr("data-cbox-"+t),void 0!==r?this.cache[t]=r:void 0!==n[t]?this.cache[t]=n[t]:void 0!==J[t]&&(this.cache[t]=J[t])),this.cache[t]},this.get=function(t){var n=this.value(t);return e.isFunction(n)?n.call(this.el,this):n}}function s(e){var t=C.length,n=(B+e)%t;return 0>n?t+n:n}function a(e,t){return Math.round((/%/.test(e)?("x"===t?S.width():i())/100:1)*parseInt(e,10))}function u(e,t){return e.get("photo")||e.get("photoRegex").test(t)}function c(e,t){return e.get("retinaUrl")&&n.devicePixelRatio>1?t.replace(e.get("photoRegex"),e.get("retinaSuffix")):t}function l(e){"contains"in b[0]&&!b[0].contains(e.target)&&e.target!==y[0]&&(e.stopPropagation(),b.focus())}function p(e){p.str!==e&&(b.add(y).removeClass(p.str).addClass(e),p.str=e)}function h(t){B=0,t&&t!==!1&&"nofollow"!==t?(C=e("."+ee).filter(function(){var n=e.data(this,K),r=new o(this,n);return r.get("rel")===t}),B=C.index(D.el),-1===B&&(C=C.add(D.el),B=C.length-1)):C=e(D.el)}function d(n){e(t).trigger(n),ae.triggerHandler(n)}function f(n){var i;if(!G){if(i=e(n).data(K),D=new o(n,i),h(D.get("rel")),!U){U=$=!0,p(D.get("className")),b.css({visibility:"hidden",display:"block",opacity:""}),j=r(ue,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),w.css({width:"",height:""}).append(j),F=T.height()+E.height()+w.outerHeight(!0)-w.height(),H=_.width()+k.width()+w.outerWidth(!0)-w.width(),M=j.outerHeight(!0),W=j.outerWidth(!0);var s=a(D.get("initialWidth"),"x"),u=a(D.get("initialHeight"),"y"),c=D.get("maxWidth"),f=D.get("maxHeight");D.w=(c!==!1?Math.min(s,a(c,"x")):s)-W-H,D.h=(f!==!1?Math.min(u,a(f,"y")):u)-M-F,j.css({width:"",height:D.h}),X.position(),d(te),D.get("onOpen"),O.add(I).hide(),b.focus(),D.get("trapFocus")&&t.addEventListener&&(t.addEventListener("focus",l,!0),ae.one(oe,function(){t.removeEventListener("focus",l,!0)})),D.get("returnFocus")&&ae.one(oe,function(){e(D.el).focus()})}var g=parseFloat(D.get("opacity"));y.css({opacity:g===g?g:"",cursor:D.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),D.get("closeButton")?z.html(D.get("close")).appendTo(w):z.appendTo("<div/>"),v()}}function g(){b||(V=!1,S=e(n),b=r(ue).attr({id:K,"class":e.support.opacity===!1?Z+"IE":"",role:"dialog",tabindex:"-1"}).hide(),y=r(ue,"Overlay").hide(),L=e([r(ue,"LoadingOverlay")[0],r(ue,"LoadingGraphic")[0]]),x=r(ue,"Wrapper"),w=r(ue,"Content").append(I=r(ue,"Title"),N=r(ue,"Current"),q=e('<button type="button"/>').attr({id:Z+"Previous"}),R=e('<button type="button"/>').attr({id:Z+"Next"}),P=r("button","Slideshow"),L),z=e('<button type="button"/>').attr({id:Z+"Close"}),x.append(r(ue).append(r(ue,"TopLeft"),T=r(ue,"TopCenter"),r(ue,"TopRight")),r(ue,!1,"clear:left").append(_=r(ue,"MiddleLeft"),w,k=r(ue,"MiddleRight")),r(ue,!1,"clear:left").append(r(ue,"BottomLeft"),E=r(ue,"BottomCenter"),r(ue,"BottomRight"))).find("div div").css({"float":"left"}),A=r(ue,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),O=R.add(q).add(N).add(P)),t.body&&!b.parent().length&&e(t.body).append(y,b.append(x,A))}function m(){function n(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),f(this))}return b?(V||(V=!0,R.click(function(){X.next()}),q.click(function(){X.prev()}),z.click(function(){X.close()}),y.click(function(){D.get("overlayClose")&&X.close()}),e(t).bind("keydown."+Z,function(e){var t=e.keyCode;U&&D.get("escKey")&&27===t&&(e.preventDefault(),X.close()),U&&D.get("arrowKey")&&C[1]&&!e.altKey&&(37===t?(e.preventDefault(),q.click()):39===t&&(e.preventDefault(),R.click()))}),e.isFunction(e.fn.on)?e(t).on("click."+Z,"."+ee,n):e("."+ee).live("click."+Z,n)),!0):!1}function v(){var t,i,o,s=X.prep,l=++ce;if($=!0,Q=!1,d(se),d(ne),D.get("onLoad"),D.h=D.get("height")?a(D.get("height"),"y")-M-F:D.get("innerHeight")&&a(D.get("innerHeight"),"y"),D.w=D.get("width")?a(D.get("width"),"x")-W-H:D.get("innerWidth")&&a(D.get("innerWidth"),"x"),D.mw=D.w,D.mh=D.h,D.get("maxWidth")&&(D.mw=a(D.get("maxWidth"),"x")-W-H,D.mw=D.w&&D.w<D.mw?D.w:D.mw),D.get("maxHeight")&&(D.mh=a(D.get("maxHeight"),"y")-M-F,D.mh=D.h&&D.h<D.mh?D.h:D.mh),t=D.get("href"),Y=setTimeout(function(){L.show()},100),D.get("inline")){var p=e(t);o=e("<div>").hide().insertBefore(p),ae.one(se,function(){o.replaceWith(p)}),s(p)}else D.get("iframe")?s(" "):D.get("html")?s(D.get("html")):u(D,t)?(t=c(D,t),Q=D.get("createImg"),e(Q).addClass(Z+"Photo").bind("error",function(){s(r(ue,"Error").html(D.get("imgError")))}).one("load",function(){l===ce&&setTimeout(function(){var e;D.get("retinaImage")&&n.devicePixelRatio>1&&(Q.height=Q.height/n.devicePixelRatio,Q.width=Q.width/n.devicePixelRatio),D.get("scalePhotos")&&(i=function(){Q.height-=Q.height*e,Q.width-=Q.width*e},D.mw&&Q.width>D.mw&&(e=(Q.width-D.mw)/Q.width,i()),D.mh&&Q.height>D.mh&&(e=(Q.height-D.mh)/Q.height,i())),D.h&&(Q.style.marginTop=Math.max(D.mh-Q.height,0)/2+"px"),C[1]&&(D.get("loop")||C[B+1])&&(Q.style.cursor="pointer",Q.onclick=function(){X.next()}),Q.style.width=Q.width+"px",Q.style.height=Q.height+"px",s(Q)},1)}),Q.src=t):t&&A.load(t,D.get("data"),function(t,n){l===ce&&s("error"===n?r(ue,"Error").html(D.get("xhrError")):e(this).contents())})}var y,b,x,w,T,_,k,E,C,S,j,A,L,I,N,P,R,q,z,O,D,F,H,M,W,B,Q,U,$,G,Y,X,V,J={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return e(this).attr("href")},title:function(){return this.title},createImg:function(){var t=new Image,n=e(this).data("cbox-img-attrs");return"object"==typeof n&&e.each(n,function(e,n){t[e]=n}),t},createIframe:function(){var n=t.createElement("iframe"),r=e(this).data("cbox-iframe-attrs");return"object"==typeof r&&e.each(r,function(e,t){n[e]=t}),"frameBorder"in n&&(n.frameBorder=0),"allowTransparency"in n&&(n.allowTransparency="true"),n.name=(new Date).getTime(),n.allowFullScreen=!0,n}},K="colorbox",Z="cbox",ee=Z+"Element",te=Z+"_open",ne=Z+"_load",re=Z+"_complete",ie=Z+"_cleanup",oe=Z+"_closed",se=Z+"_purge",ae=e("<a/>"),ue="div",ce=0,le={},pe=function(){function e(){clearTimeout(s)}function t(){(D.get("loop")||C[B+1])&&(e(),s=setTimeout(X.next,D.get("slideshowSpeed")))}function n(){P.html(D.get("slideshowStop")).unbind(u).one(u,r),ae.bind(re,t).bind(ne,e),b.removeClass(a+"off").addClass(a+"on")}function r(){e(),ae.unbind(re,t).unbind(ne,e),P.html(D.get("slideshowStart")).unbind(u).one(u,function(){X.next(),n()}),b.removeClass(a+"on").addClass(a+"off")}function i(){o=!1,P.hide(),e(),ae.unbind(re,t).unbind(ne,e),b.removeClass(a+"off "+a+"on")}var o,s,a=Z+"Slideshow_",u="click."+Z;return function(){o?D.get("slideshow")||(ae.unbind(ie,i),i()):D.get("slideshow")&&C[1]&&(o=!0,ae.one(ie,i),D.get("slideshowAuto")?n():r(),P.show())}}();e[K]||(e(g),X=e.fn[K]=e[K]=function(t,n){var r,i=this;return t=t||{},e.isFunction(i)&&(i=e("<a/>"),t.open=!0),i[0]?(g(),m()&&(n&&(t.onComplete=n),i.each(function(){var n=e.data(this,K)||{};e.data(this,K,e.extend(n,t))}).addClass(ee),r=new o(i[0],t),r.get("open")&&f(i[0])),i):i},X.position=function(t,n){function r(){T[0].style.width=E[0].style.width=w[0].style.width=parseInt(b[0].style.width,10)-H+"px",w[0].style.height=_[0].style.height=k[0].style.height=parseInt(b[0].style.height,10)-F+"px"}var o,s,u,c=0,l=0,p=b.offset();if(S.unbind("resize."+Z),b.css({top:-9e4,left:-9e4}),s=S.scrollTop(),u=S.scrollLeft(),D.get("fixed")?(p.top-=s,p.left-=u,b.css({position:"fixed"})):(c=s,l=u,b.css({position:"absolute"})),l+=D.get("right")!==!1?Math.max(S.width()-D.w-W-H-a(D.get("right"),"x"),0):D.get("left")!==!1?a(D.get("left"),"x"):Math.round(Math.max(S.width()-D.w-W-H,0)/2),c+=D.get("bottom")!==!1?Math.max(i()-D.h-M-F-a(D.get("bottom"),"y"),0):D.get("top")!==!1?a(D.get("top"),"y"):Math.round(Math.max(i()-D.h-M-F,0)/2),b.css({top:p.top,left:p.left,visibility:"visible"}),x[0].style.width=x[0].style.height="9999px",o={width:D.w+W+H,height:D.h+M+F,top:c,left:l},t){var h=0;e.each(o,function(e){return o[e]!==le[e]?void(h=t):void 0}),t=h}le=o,t||b.css(o),b.dequeue().animate(o,{duration:t||0,complete:function(){r(),$=!1,x[0].style.width=D.w+W+H+"px",x[0].style.height=D.h+M+F+"px",D.get("reposition")&&setTimeout(function(){S.bind("resize."+Z,X.position)},1),e.isFunction(n)&&n()},step:r})},X.resize=function(e){var t;U&&(e=e||{},e.width&&(D.w=a(e.width,"x")-W-H),e.innerWidth&&(D.w=a(e.innerWidth,"x")),j.css({width:D.w}),e.height&&(D.h=a(e.height,"y")-M-F),e.innerHeight&&(D.h=a(e.innerHeight,"y")),e.innerHeight||e.height||(t=j.scrollTop(),j.css({height:"auto"}),D.h=j.height()),j.css({height:D.h}),t&&j.scrollTop(t),X.position("none"===D.get("transition")?0:D.get("speed")))},X.prep=function(n){function i(){return D.w=D.w||j.width(),D.w=D.mw&&D.mw<D.w?D.mw:D.w,D.w}function a(){return D.h=D.h||j.height(),D.h=D.mh&&D.mh<D.h?D.mh:D.h,D.h}if(U){var l,h="none"===D.get("transition")?0:D.get("speed");j.remove(),j=r(ue,"LoadedContent").append(n),j.hide().appendTo(A.show()).css({width:i(),overflow:D.get("scrolling")?"auto":"hidden"}).css({height:a()}).prependTo(w),A.hide(),e(Q).css({"float":"none"}),p(D.get("className")),l=function(){function n(){e.support.opacity===!1&&b[0].style.removeAttribute("filter")}var r,i,a=C.length;U&&(i=function(){clearTimeout(Y),L.hide(),d(re),D.get("onComplete")},I.html(D.get("title")).show(),j.show(),a>1?("string"==typeof D.get("current")&&N.html(D.get("current").replace("{current}",B+1).replace("{total}",a)).show(),R[D.get("loop")||a-1>B?"show":"hide"]().html(D.get("next")),q[D.get("loop")||B?"show":"hide"]().html(D.get("previous")),pe(),D.get("preloading")&&e.each([s(-1),s(1)],function(){var n,r=C[this],i=new o(r,e.data(r,K)),s=i.get("href");s&&u(i,s)&&(s=c(i,s),n=t.createElement("img"),n.src=s)})):O.hide(),D.get("iframe")?(r=D.get("createIframe"),D.get("scrolling")||(r.scrolling="no"),e(r).attr({src:D.get("href"),"class":Z+"Iframe"}).one("load",i).appendTo(j),ae.one(se,function(){r.src="//about:blank"}),D.get("fastIframe")&&e(r).trigger("load")):i(),"fade"===D.get("transition")?b.fadeTo(h,1,n):n())},"fade"===D.get("transition")?b.fadeTo(h,0,function(){X.position(0,l)}):X.position(h,l)}},X.next=function(){!$&&C[1]&&(D.get("loop")||C[B+1])&&(B=s(1),f(C[B]))},X.prev=function(){!$&&C[1]&&(D.get("loop")||B)&&(B=s(-1),f(C[B]))},X.close=function(){U&&!G&&(G=!0,U=!1,d(ie),D.get("onCleanup"),S.unbind("."+Z),y.fadeTo(D.get("fadeOut")||0,0),b.stop().fadeTo(D.get("fadeOut")||0,0,function(){b.hide(),y.hide(),d(se),j.remove(),setTimeout(function(){G=!1,d(oe),D.get("onClosed")},1)}))},X.remove=function(){b&&(b.stop(),e[K].close(),b.stop(!1,!0).remove(),y.remove(),G=!1,b=null,e("."+ee).removeData(K).removeClass(ee),e(t).unbind("click."+Z).unbind("keydown."+Z))},X.element=function(){return e(D.el)},X.settings=J)}(jQuery,document,window),jQuery.extend(jQuery.colorbox.settings,{current:"{total}枚中{current}枚目",previous:"前",next:"次",close:"閉じる",xhrError:"コンテンツの読み込みに失敗しました",imgError:"画像の読み込みに失敗しました",slideshowStart:"スライドショー開始",slideshowStop:"スライドショー終了"});var Hogan={};!function(e){function t(e,t,n){var r;return t&&"object"==typeof t&&(void 0!==t[e]?r=t[e]:n&&t.get&&"function"==typeof t.get&&(r=t.get(e))),r}function n(e,t,n,r,i,o){function s(){}function a(){}s.prototype=e,a.prototype=e.subs;var u,c=new s;c.subs=new a,c.subsText={},c.buf="",r=r||{},c.stackSubs=r,c.subsText=o;for(u in t)r[u]||(r[u]=t[u]);for(u in r)c.subs[u]=r[u];i=i||{},c.stackPartials=i;for(u in n)i[u]||(i[u]=n[u]);for(u in i)c.partials[u]=i[u];return c}function r(e){return(null===e||void 0===e?"":e)+""}function i(e){return e=r(e),l.test(e)?e.replace(o,"&amp;").replace(s,"&lt;").replace(a,"&gt;").replace(u,"&#39;").replace(c,"&quot;"):e}e.Template=function(e,t,n,r){e=e||{},this.r=e.code||this.r,this.c=n,this.options=r||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},e.Template.prototype={r:function(){return""},v:i,t:r,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},ep:function(e,t){var r=this.partials[e],i=t[r.name];if(r.instance&&r.base==i)return r.instance;if("string"==typeof i){if(!this.c)throw Error("No compiler available.");i=this.c.compile(i,this.options)}if(!i)return null;if(this.partials[e].base=i,r.subs){t.stackText||(t.stackText={});for(key in r.subs)t.stackText[key]||(t.stackText[key]=void 0!==this.activeSub&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);i=n(i,r.subs,r.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=i,i},rp:function(e,t,n,r){var i=this.ep(e,n);return i?i.ri(t,n,r):""},rs:function(e,t,n){var r=e[e.length-1];if(!p(r))return void n(e,t,this);for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,o,s){var a;return p(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ms(e,t,n,r,i,o,s)),a=!!e,!r&&a&&t&&t.push("object"==typeof e?e:t[t.length-1]),a)},d:function(e,n,r,i){var o,s=e.split("."),a=this.f(s[0],n,r,i),u=this.options.modelGet,c=null;if("."===e&&p(n[n.length-2]))a=n[n.length-1];else for(var l=1;l<s.length;l++)o=t(s[l],a,u),void 0!==o?(c=a,a=o):a="";return i&&!a?!1:(i||"function"!=typeof a||(n.push(c),a=this.mv(a,n,r),n.pop()),a)},f:function(e,n,r,i){for(var o=!1,s=null,a=!1,u=this.options.modelGet,c=n.length-1;c>=0;c--)if(s=n[c],o=t(e,s,u),void 0!==o){a=!0;break}return a?(i||"function"!=typeof o||(o=this.mv(o,n,r)),o):i?!1:""},ls:function(e,t,n,i,o){var s=this.options.delimiters;return this.options.delimiters=o,this.b(this.ct(r(e.call(t,i)),t,n)),this.options.delimiters=s,!1},ct:function(e,t,n){if(this.options.disableLambda)throw Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,n)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,n,r,i,o,s){var a,u=t[t.length-1],c=e.call(u);return"function"==typeof c?r?!0:(a=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(c,u,n,a.substring(i,o),s)):c},mv:function(e,t,n){var i=t[t.length-1],o=e.call(i);return"function"==typeof o?this.ct(r(o.call(i)),i,n):o},sub:function(e,t,n,r){var i=this.subs[e];i&&(this.activeSub=e,i(t,n,this,r),this.activeSub=!1)}};var o=/&/g,s=/</g,a=/>/g,u=/\'/g,c=/\"/g,l=/[&<>\"\']/,p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof exports?exports:Hogan),function(e){function t(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function n(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function r(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;i>r;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}function i(t,n,r,a){var u=[],c=null,l=null,p=null;for(l=r[r.length-1];t.length>0;){if(p=t.shift(),l&&"<"==l.tag&&!(p.tag in w))throw Error("Illegal content in < super tag.");if(e.tags[p.tag]<=e.tags.$||o(p,a))r.push(p),p.nodes=i(t,p.tag,r,a);else{if("/"==p.tag){if(0===r.length)throw Error("Closing tag without opener: /"+p.n);if(c=r.pop(),p.n!=c.n&&!s(p.n,c.n,a))throw Error("Nesting error: "+c.n+" vs. "+p.n);return c.end=p.i,u}"\n"==p.tag&&(p.last=0==t.length||"\n"==t[0].tag)}u.push(p)}if(r.length>0)throw Error("missing closing tag: "+r.pop().n);return u}function o(e,t){for(var n=0,r=t.length;r>n;n++)if(t[n].o==e.n)return e.tag="#",!0}function s(e,t,n){for(var r=0,i=n.length;i>r;r++)if(n[r].c==e&&n[r].o==t)return!0}function a(e){var t=[];for(var n in e)t.push('"'+c(n)+'": function(c,p,t,i) {'+e[n]+"}");return"{ "+t.join(",")+" }"}function u(e){var t=[];for(var n in e.partials)t.push('"'+c(n)+'":{name:"'+c(e.partials[n].name)+'", '+u(e.partials[n])+"}");return"partials: {"+t.join(",")+"}, subs: "+a(e.subs)}function c(e){return e.replace(y,"\\\\").replace(g,'\\"').replace(m,"\\n").replace(v,"\\r").replace(b,"\\u2028").replace(x,"\\u2029")}function l(e){return~e.indexOf(".")?"d":"f"}function p(e,t){var n="<"+(t.prefix||""),r=n+e.n+T++;return t.partials[r]={name:e.n,partials:{}},t.code+='t.b(t.rp("'+c(r)+'",c,p,"'+(e.indent||"")+'"));',r}function h(e,t){t.code+="t.b(t.t(t."+l(e.n)+'("'+c(e.n)+'",c,p,0)));'}function d(e){return"t.b("+e+");"}var f=/\S/,g=/\"/g,m=/\n/g,v=/\r/g,y=/\\/g,b=/\u2028/,x=/\u2029/;e.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},e.scan=function(i,o){function s(){y.length>0&&(b.push({tag:"_t",text:new String(y)}),y="")}function a(){for(var t=!0,n=T;n<b.length;n++)if(t=e.tags[b[n].tag]<e.tags._v||"_t"==b[n].tag&&null===b[n].text.match(f),!t)return!1;return t}function u(e,t){if(s(),e&&a())for(var n,r=T;r<b.length;r++)b[r].text&&((n=b[r+1])&&">"==n.tag&&(n.indent=""+b[r].text),b.splice(r,1));else t||b.push({tag:"\n"});x=!1,T=b.length}function c(e,t){var r="="+k,i=e.indexOf(r,t),o=n(e.substring(e.indexOf("=",t)+1,i)).split(" ");return _=o[0],k=o[o.length-1],i+r.length-1}var l=i.length,p=0,h=1,d=2,g=p,m=null,v=null,y="",b=[],x=!1,w=0,T=0,_="{{",k="}}";for(o&&(o=o.split(" "),_=o[0],k=o[1]),w=0;l>w;w++)g==p?r(_,i,w)?(--w,s(),g=h):"\n"==i.charAt(w)?u(x):y+=i.charAt(w):g==h?(w+=_.length-1,v=e.tags[i.charAt(w+1)],m=v?i.charAt(w+1):"_v","="==m?(w=c(i,w),g=p):(v&&w++,g=d),x=w):r(k,i,w)?(b.push({tag:m,n:n(y),otag:_,ctag:k,i:"/"==m?x-_.length:w+k.length}),y="",w+=k.length-1,g=p,"{"==m&&("}}"==k?w++:t(b[b.length-1]))):y+=i.charAt(w);return u(x,!0),b};var w={_t:!0,"\n":!0,$:!0,"/":!0};e.stringify=function(t){return"{code: function (c,p,i) { "+e.wrapMain(t.code)+" },"+u(t)+"}"};var T=0;e.generate=function(t,n,r){T=0;var i={code:"",subs:{},partials:{}};return e.walk(t,i),r.asString?this.stringify(i,n,r):this.makeTemplate(i,n,r)},e.wrapMain=function(e){return'var t=this;t.b(i=i||"");'+e+"return t.fl();"},e.template=e.Template,e.makeTemplate=function(e,t,n){var r=this.makePartials(e);return r.code=Function("c","p","i",this.wrapMain(e.code)),new this.template(r,t,this,n)},e.makePartials=function(e){var t,n={subs:{},partials:e.partials,name:e.name};for(t in n.partials)n.partials[t]=this.makePartials(n.partials[t]);for(t in e.subs)n.subs[t]=Function("c","p","t","i",e.subs[t]);return n},e.codegen={"#":function(t,n){n.code+="if(t.s(t."+l(t.n)+'("'+c(t.n)+'",c,p,1),c,p,0,'+t.i+","+t.end+',"'+t.otag+" "+t.ctag+'")){t.rs(c,p,function(c,p,t){',e.walk(t.nodes,n),n.code+="});c.pop();}"},"^":function(t,n){n.code+="if(!t.s(t."+l(t.n)+'("'+c(t.n)+'",c,p,1),c,p,1,0,0,"")){',e.walk(t.nodes,n),n.code+="};"},">":p,"<":function(t,n){var r={partials:{},code:"",subs:{},inPartial:!0};e.walk(t.nodes,r);var i=n.partials[p(t,n)];i.subs=r.subs,i.partials=r.partials},$:function(t,n){var r={subs:{},code:"",partials:n.partials,prefix:t.n};e.walk(t.nodes,r),n.subs[t.n]=r.code,n.inPartial||(n.code+='t.sub("'+c(t.n)+'",c,p,i);')},"\n":function(e,t){t.code+=d('"\\n"'+(e.last?"":" + i"))},_v:function(e,t){t.code+="t.b(t.v(t."+l(e.n)+'("'+c(e.n)+'",c,p,0)));'},_t:function(e,t){t.code+=d('"'+c(e.text)+'"')},"{":h,"&":h},e.walk=function(t,n){for(var r,i=0,o=t.length;o>i;i++)r=e.codegen[t[i].tag],r&&r(t[i],n);return n},e.parse=function(e,t,n){return n=n||{},i(e,"",[],n.sectionTags||[])},e.cache={},e.cacheKey=function(e,t){return[e,!!t.asString,!!t.disableLambda,t.delimiters,!!t.modelGet].join("||")},e.compile=function(t,n){n=n||{};var r=e.cacheKey(t,n),i=this.cache[r];if(i){var o=i.partials;for(var s in o)delete o[s].instance;return i}return i=this.generate(this.parse(this.scan(t,n.delimiters),t,n),t,n),this.cache[r]=i}}("undefined"!=typeof exports?exports:Hogan),!function(e){function t(){}function n(e){function n(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function i(t,n){e.fn[t]=function(i){if("string"==typeof i){for(var s=r.call(arguments,1),a=0,u=this.length;u>a;a++){var c=this[a],l=e.data(c,t);if(l)if(e.isFunction(l[i])&&"_"!==i.charAt(0)){var p=l[i].apply(l,s);if(void 0!==p)return p}else o("no such method '"+i+"' for "+t+" instance");else o("cannot call methods on "+t+" prior to initialization; attempted to call '"+i+"'")}return this}return this.each(function(){var r=e.data(this,t);r?(r.option(i),r._init()):(r=new n(this,i),e.data(this,t,r))})}}if(e){var o="undefined"==typeof console?t:function(e){console.error(e)};return e.bridget=function(e,t){n(t),i(e,t)},e.bridget}}var r=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],n):n("object"==typeof exports?require("jquery"):e.jQuery)}(window),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,r=function(){};n.addEventListener?r=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(r=function(e,n,r){e[n+r]=r.handleEvent?function(){var n=t(e);r.handleEvent.call(r,n)}:function(){var n=t(e);r.call(e,n)},e.attachEvent("on"+n,e[n+r])});var i=function(){};n.removeEventListener?i=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(i=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=void 0}});var o={bind:r,unbind:i};"function"==typeof define&&define.amd?define("eventie/eventie",o):"object"==typeof exports?module.exports=o:e.eventie=o}(this),function(e){function t(e){"function"==typeof e&&(t.isReady?e():s.push(e))}function n(e){var n="readystatechange"===e.type&&"complete"!==o.readyState;t.isReady||n||r()}function r(){t.isReady=!0;for(var e=0,n=s.length;n>e;e++){var r=s[e];r()}}function i(i){return"complete"===o.readyState?r():(i.bind(o,"DOMContentLoaded",n),i.bind(o,"readystatechange",n),i.bind(e,"load",n)),t}var o=e.document,s=[];t.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],i):"object"==typeof exports?module.exports=i(require("eventie")):e.docReady=i(e.eventie)}(window),function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,o=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),o="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(o?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&(r=t(o[i],n),-1!==r&&o[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)o.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?o.call(this,r,i):s.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,o,s=this.getListenersAsObject(e);for(i in s)if(s.hasOwnProperty(i))for(r=s[i].length;r--;)n=s[i][r],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=o,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:i.EventEmitter=e}.call(this),function(e){function t(e){if(e){if("string"==typeof r[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,i=0,o=n.length;o>i;i++)if(t=n[i]+e,"string"==typeof r[t])return t}}var n="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):"object"==typeof exports?module.exports=t:e.getStyleProperty=t}(window),function(e){function t(e){var t=parseFloat(e),n=-1===e.indexOf("%")&&!isNaN(t);return n&&t}function n(){}function r(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,n=s.length;n>t;t++){var r=s[t];e[r]=0}return e}function i(n){function i(){if(!h){h=!0;var r=e.getComputedStyle;if(c=function(){var e=r?function(e){return r(e,null)}:function(e){return e.currentStyle};return function(t){var n=e(t);return n||o("Style returned "+n+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),n}}(),l=n("boxSizing")){var i=document.createElement("div");i.style.width="200px",i.style.padding="1px 2px 3px 4px",i.style.borderStyle="solid",i.style.borderWidth="1px 2px 3px 4px",i.style[l]="border-box";var s=document.body||document.documentElement;s.appendChild(i);var a=c(i);p=200===t(a.width),s.removeChild(i)}}}function a(e){if(i(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var n=c(e);if("none"===n.display)return r();var o={};o.width=e.offsetWidth,o.height=e.offsetHeight;for(var a=o.isBorderBox=!(!l||!n[l]||"border-box"!==n[l]),h=0,d=s.length;d>h;h++){var f=s[h],g=n[f];g=u(e,g);var m=parseFloat(g);o[f]=isNaN(m)?0:m}var v=o.paddingLeft+o.paddingRight,y=o.paddingTop+o.paddingBottom,b=o.marginLeft+o.marginRight,x=o.marginTop+o.marginBottom,w=o.borderLeftWidth+o.borderRightWidth,T=o.borderTopWidth+o.borderBottomWidth,_=a&&p,k=t(n.width);k!==!1&&(o.width=k+(_?0:v+w));var E=t(n.height);return E!==!1&&(o.height=E+(_?0:y+T)),o.innerWidth=o.width-(v+w),o.innerHeight=o.height-(y+T),o.outerWidth=o.width+b,o.outerHeight=o.height+x,o}}function u(t,n){if(e.getComputedStyle||-1===n.indexOf("%"))return n;var r=t.style,i=r.left,o=t.runtimeStyle,s=o&&o.left;return s&&(o.left=t.currentStyle.left),r.left=n,n=r.pixelLeft,r.left=i,s&&(o.left=s),n}var c,l,p,h=!1;return a}var o="undefined"==typeof console?n:function(e){console.error(e)},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],i):"object"==typeof exports?module.exports=i(require("desandro-get-style-property")):e.getSize=i(e.getStyleProperty)}(window),function(e){function t(e,t){return e[s](t)}function n(e){if(!e.parentNode){var t=document.createDocumentFragment();t.appendChild(e)}}function r(e,t){n(e);for(var r=e.parentNode.querySelectorAll(t),i=0,o=r.length;o>i;i++)if(r[i]===e)return!0;return!1}function i(e,r){return n(e),t(e,r)}var o,s=function(){if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],n=0,r=t.length;r>n;n++){var i=t[n],o=i+"MatchesSelector";if(e[o])return o}}();if(s){var a=document.createElement("div"),u=t(a,"div");o=u?t:i}else o=r;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return o}):"object"==typeof exports?module.exports=o:window.matchesSelector=o}(Element.prototype),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){for(var t in e)return!1;return t=null,!0}function r(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function i(e,i,o){function a(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var u=o("transition"),c=o("transform"),l=u&&c,p=!!o("perspective"),h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[u],d=["transform","transition","transitionDuration","transitionProperty"],f=function(){for(var e={},t=0,n=d.length;n>t;t++){var r=d[t],i=o(r);i&&i!==r&&(e[r]=i)}return e}();t(a.prototype,e.prototype),a.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},a.prototype.getSize=function(){this.size=i(this.element)},a.prototype.css=function(e){var t=this.element.style;for(var n in e){var r=f[n]||n;t[r]=e[n]}},a.prototype.getPosition=function(){var e=s(this.element),t=this.layout.options,n=t.isOriginLeft,r=t.isOriginTop,i=parseInt(e[n?"left":"right"],10),o=parseInt(e[r?"top":"bottom"],10);i=isNaN(i)?0:i,o=isNaN(o)?0:o;var a=this.layout.size;i-=n?a.paddingLeft:a.paddingRight,o-=r?a.paddingTop:a.paddingBottom,this.position.x=i,this.position.y=o},a.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,n={};t.isOriginLeft?(n.left=this.position.x+e.paddingLeft+"px",n.right=""):(n.right=this.position.x+e.paddingRight+"px",n.left=""),t.isOriginTop?(n.top=this.position.y+e.paddingTop+"px",n.bottom=""):(n.bottom=this.position.y+e.paddingBottom+"px",n.top=""),this.css(n),this.emitEvent("layout",[this])};var g=p?function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"}:function(e,t){return"translate("+e+"px, "+t+"px)"};a.prototype._transitionTo=function(e,t){this.getPosition();var n=this.position.x,r=this.position.y,i=parseInt(e,10),o=parseInt(t,10),s=i===this.position.x&&o===this.position.y;if(this.setPosition(e,t),s&&!this.isTransitioning)return void this.layoutPosition();var a=e-n,u=t-r,c={},l=this.layout.options;a=l.isOriginLeft?a:-a,u=l.isOriginTop?u:-u,c.transform=g(a,u),this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},a.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},a.prototype.moveTo=l?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},a.prototype._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},a.prototype._transition=function(e){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(e);var t=this._transn;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];

for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);if(e.from){this.css(e.from);var r=this.element.offsetHeight;r=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var m=c&&r(c)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:m,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(h,this,!1))},a.prototype.transition=a.prototype[u?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},a.prototype.onotransitionend=function(e){this.ontransitionend(e)};var v={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,r=v[e.propertyName]||e.propertyName;if(delete t.ingProperties[r],n(t.ingProperties)&&this.disableTransition(),r in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[r]),r in t.onEnd){var i=t.onEnd[r];i.call(this),delete t.onEnd[r]}this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(h,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var y={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(y)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(!u||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var e=this;this.on("transitionEnd",function(){return e.removeElem(),!0}),this.hide()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options;this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0})},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options;this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}var o=e.getComputedStyle,s=o?function(e){return o(e,null)}:function(e){return e.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],i):"object"==typeof exports?module.exports=i(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(e.Outlayer={},e.Outlayer.Item=i(e.EventEmitter,e.getSize,e.getStyleProperty))}(window),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){return"[object Array]"===p.call(e)}function r(e){var t=[];if(n(e))t=e;else if(e&&"number"==typeof e.length)for(var r=0,i=e.length;i>r;r++)t.push(e[r]);else t.push(e);return t}function i(e,t){var n=d(t,e);-1!==n&&t.splice(n,1)}function o(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()}function s(n,s,p,d,f,g){function m(e,n){if("string"==typeof e&&(e=a.querySelector(e)),!e||!h(e))return void(u&&u.error("Bad "+this.constructor.namespace+" element: "+e));this.element=e,this.options=t({},this.constructor.defaults),this.option(n);var r=++v;this.element.outlayerGUID=r,y[r]=this,this._create(),this.options.isInitLayout&&this.layout()}var v=0,y={};return m.namespace="outlayer",m.Item=g,m.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},t(m.prototype,p.prototype),m.prototype.option=function(e){t(this.options,e)},m.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),t(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},m.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},m.prototype._itemize=function(e){for(var t=this._filterFindItemElements(e),n=this.constructor.Item,r=[],i=0,o=t.length;o>i;i++){var s=t[i],a=new n(s,this);r.push(a)}return r},m.prototype._filterFindItemElements=function(e){e=r(e);for(var t=this.options.itemSelector,n=[],i=0,o=e.length;o>i;i++){var s=e[i];if(h(s))if(t){f(s,t)&&n.push(s);for(var a=s.querySelectorAll(t),u=0,c=a.length;c>u;u++)n.push(a[u])}else n.push(s)}return n},m.prototype.getItemElements=function(){for(var e=[],t=0,n=this.items.length;n>t;t++)e.push(this.items[t].element);return e},m.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},m.prototype._init=m.prototype.layout,m.prototype._resetLayout=function(){this.getSize()},m.prototype.getSize=function(){this.size=d(this.element)},m.prototype._getMeasurement=function(e,t){var n,r=this.options[e];r?("string"==typeof r?n=this.element.querySelector(r):h(r)&&(n=r),this[e]=n?d(n)[t]:r):this[e]=0},m.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},m.prototype._getItemsForLayout=function(e){for(var t=[],n=0,r=e.length;r>n;n++){var i=e[n];i.isIgnored||t.push(i)}return t},m.prototype._layoutItems=function(e,t){function n(){r.emitEvent("layoutComplete",[r,e])}var r=this;if(!e||!e.length)return void n();this._itemsOn(e,"layout",n);for(var i=[],o=0,s=e.length;s>o;o++){var a=e[o],u=this._getItemLayoutPosition(a);u.item=a,u.isInstant=t||a.isLayoutInstant,i.push(u)}this._processLayoutQueue(i)},m.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},m.prototype._processLayoutQueue=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];this._positionItem(r.item,r.x,r.y,r.isInstant)}},m.prototype._positionItem=function(e,t,n,r){r?e.goTo(t,n):e.moveTo(t,n)},m.prototype._postLayout=function(){this.resizeContainer()},m.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},m.prototype._getContainerSize=l,m.prototype._setContainerMeasure=function(e,t){if(void 0!==e){var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},m.prototype._itemsOn=function(e,t,n){function r(){return i++,i===o&&n.call(s),!0}for(var i=0,o=e.length,s=this,a=0,u=e.length;u>a;a++){var c=e[a];c.on(t,r)}},m.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},m.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},m.prototype.stamp=function(e){if(e=this._find(e)){this.stamps=this.stamps.concat(e);for(var t=0,n=e.length;n>t;t++){var r=e[t];this.ignore(r)}}},m.prototype.unstamp=function(e){if(e=this._find(e))for(var t=0,n=e.length;n>t;t++){var r=e[t];i(r,this.stamps),this.unignore(r)}},m.prototype._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=r(e)):void 0},m.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,t=this.stamps.length;t>e;e++){var n=this.stamps[e];this._manageStamp(n)}}},m.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},m.prototype._manageStamp=l,m.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,r=d(e),i={left:t.left-n.left-r.marginLeft,top:t.top-n.top-r.marginTop,right:n.right-t.right-r.marginRight,bottom:n.bottom-t.bottom-r.marginBottom};return i},m.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},m.prototype.bindResize=function(){this.isResizeBound||(n.bind(e,"resize",this),this.isResizeBound=!0)},m.prototype.unbindResize=function(){this.isResizeBound&&n.unbind(e,"resize",this),this.isResizeBound=!1},m.prototype.onresize=function(){function e(){t.resize(),delete t.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var t=this;this.resizeTimeout=setTimeout(e,100)},m.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},m.prototype.needsResizeLayout=function(){var e=d(this.element),t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth},m.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},m.prototype.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},m.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)}},m.prototype.reveal=function(e){var t=e&&e.length;if(t)for(var n=0;t>n;n++){var r=e[n];r.reveal()}},m.prototype.hide=function(e){var t=e&&e.length;if(t)for(var n=0;t>n;n++){var r=e[n];r.hide()}},m.prototype.getItem=function(e){for(var t=0,n=this.items.length;n>t;t++){var r=this.items[t];if(r.element===e)return r}},m.prototype.getItems=function(e){if(e&&e.length){for(var t=[],n=0,r=e.length;r>n;n++){var i=e[n],o=this.getItem(i);o&&t.push(o)}return t}},m.prototype.remove=function(e){e=r(e);var t=this.getItems(e);if(t&&t.length){this._itemsOn(t,"remove",function(){this.emitEvent("removeComplete",[this,t])});for(var n=0,o=t.length;o>n;n++){var s=t[n];s.remove(),i(s,this.items)}}},m.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,n=this.items.length;n>t;t++){var r=this.items[t];r.destroy()}this.unbindResize();var i=this.element.outlayerGUID;delete y[i],delete this.element.outlayerGUID,c&&c.removeData(this.element,this.constructor.namespace)},m.data=function(e){var t=e&&e.outlayerGUID;return t&&y[t]},m.create=function(e,n){function r(){m.apply(this,arguments)}return Object.create?r.prototype=Object.create(m.prototype):t(r.prototype,m.prototype),r.prototype.constructor=r,r.defaults=t({},m.defaults),t(r.defaults,n),r.prototype.settings={},r.namespace=e,r.data=m.data,r.Item=function(){g.apply(this,arguments)},r.Item.prototype=new g,s(function(){for(var t=o(e),n=a.querySelectorAll(".js-"+t),i="data-"+t+"-options",s=0,l=n.length;l>s;s++){var p,h=n[s],d=h.getAttribute(i);try{p=d&&JSON.parse(d)}catch(f){u&&u.error("Error parsing "+i+" on "+h.nodeName.toLowerCase()+(h.id?"#"+h.id:"")+": "+f);continue}var g=new r(h,p);c&&c.data(h,e,g)}}),c&&c.bridget&&c.bridget(e,r),r},m.Item=g,m}var a=e.document,u=e.console,c=e.jQuery,l=function(){},p=Object.prototype.toString,h="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},d=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],s):"object"==typeof exports?module.exports=s(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):e.Outlayer=s(e.eventie,e.docReady,e.EventEmitter,e.getSize,e.matchesSelector,e.Outlayer.Item)}(window),function(e){function t(e,t){var r=e.create("masonry");return r.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var e=this.cols;for(this.colYs=[];e--;)this.colYs.push(0);this.maxY=0},r.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],n=e&&e.element;this.columnWidth=n&&t(n).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},r.prototype.getContainerWidth=function(){var e=this.options.isFitWidth?this.element.parentNode:this.element,n=t(e);this.containerWidth=n&&n.innerWidth},r.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,r=t&&1>t?"round":"ceil",i=Math[r](e.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var o=this._getColGroup(i),s=Math.min.apply(Math,o),a=n(o,s),u={x:this.columnWidth*a,y:s},c=s+e.size.outerHeight,l=this.cols+1-o.length,p=0;l>p;p++)this.colYs[a+p]=c;return u},r.prototype._getColGroup=function(e){if(2>e)return this.colYs;for(var t=[],n=this.cols+1-e,r=0;n>r;r++){var i=this.colYs.slice(r,r+e);t[r]=Math.max.apply(Math,i)}return t},r.prototype._manageStamp=function(e){var n=t(e),r=this._getElementOffset(e),i=this.options.isOriginLeft?r.left:r.right,o=i+n.outerWidth,s=Math.floor(i/this.columnWidth);s=Math.max(0,s);var a=Math.floor(o/this.columnWidth);a-=o%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var u=(this.options.isOriginTop?r.top:r.bottom)+n.outerHeight,c=s;a>=c;c++)this.colYs[c]=Math.max(u,this.colYs[c])},r.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this.options.isFitWidth&&(e.width=this._getContainerFitWidth()),e},r.prototype._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},r.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!==this.containerWidth},r}var n=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++){var i=e[n];if(i===t)return n}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],t):"object"==typeof exports?module.exports=t(require("outlayer"),require("get-size")):e.Masonry=t(e.Outlayer,e.getSize)}(window),function(e){"use strict";function t(){this.rootNode=null,this.currentPage=1,this._masonry=null,this._lockLoadingNextPage=!1,this._lastPhotoNode=null}var n=e.debounce;t.prototype.init=function(e){this.rootNode=e,this._masonry=new Masonry(e,{gutter:8,isFitWidth:!1,itemSelector:".photo",hiddenStyle:{opacity:0},visibleStyle:{opacity:1},transitionDuration:"0.8s"}),window.onscroll=n(this.onscroll.bind(this)),this.applied()},t.prototype.applied=function(){$(".lightbox").colorbox({rel:"gallery",fixed:!0,height:"90%",transition:"elastic",speed:360,width:"90%"}),this._lastPhotoNode=this.rootNode.querySelector(".photo:last-of-type")},t.prototype.onscroll=function(){document.documentElement.clientHeight>this._lastPhotoNode.getBoundingClientRect().top&&this.loadNextpage()},t.prototype.loadNextpage=function(){var e,t,n=this;this._lockLoadingNextPage||(this._lockLoadingNextPage=!0,t=""+URI("/api/photos").addSearch(URI(location.href).search(!0)).addSearch({limit:20,offset:20*this.currentPage}),e=new XMLHttpRequest,e.open("GET",t),e.send(),e.onreadystatechange=function(){var t;if(4===e.readyState){if(n._lockLoadingNextPage=!1,200!==e.status)return console.error([e.status,e]);try{t=JSON.parse(e.responseText)}catch(r){return console.error([r,e.responseText])}++n.currentPage,n.insertPhotoNodes(t.map(function(e){var t=349,n=~~(e.height*t/e.width);return e.thumb_width=t,e.thumb_height=n,e}))}})},t.prototype.insertPhotoNodes=function(e){var t=[],n=document.createDocumentFragment();e.forEach(function(e){var r=document.createElement("div");r.classList.add("photo"),e.alt=e.description_ja+" 蘭裕園 Ranyuen",e.origUrl="/images/gallery/"+e.id+".jpg",e.thumbUrl="/api/photo?format=jpeg&id="+e.id+"&width="+e.thumb_width,r.innerHTML=Hogan.compile('<a class="lightbox" href="{{origUrl}}" title="{{alt}}"><img rel="gallery" src="{{thumbUrl}}" width="{{thumb_width}}" height="{{thumb_height}}" alt="{{alt}}"/></a><div>{{description_ja}}</div><div>{{description_en}}</div>').render(e),n.appendChild(r),t.push(r)}),this.rootNode.appendChild(n),this._masonry.appended(t),this.applied()},e.PhotoGallery=t}((this||0).self||global);
//# sourceMappingURL=photoGallery.min.js.map